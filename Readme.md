# Account service
Сервис на языке ASP.NET 9.0 предназначенный для обработки задач следующего характера:
> - Я, как менеджер банка Анна, открыла клиенту Ивану бесплатный текущий счёт, чтобы он мог хранить средства клиенту — система опубликовала событие AccountOpened, чтобы CRM получила данные о счёте.
> - Я, как менеджер банка Анна, открыла клиенту  Ивану срочный вклад «Надёжный‑6» под 3 % годовых, чтобы он смог накопить средства.
> - Я, как кассир банка Алексей, пополнил текущий счёт клиента Ивана на 1 000 рублей наличными.   — система опубликовала событие MoneyCredited для сервиса уведомлений.
> - Я, как клиент банка Иван, перевёл 200 рублей со своего текущего счёта на вклад «Надёжный‑6», чтобы пополнить вклад.— система гарантированно опубликовала TransferCompleted, даже если RabbitMQ был временно недоступен.
> - Я, как менеджер банка Анна, выдал клиенту Ивану выписку по его счетам.
> - Я, как клиент банка Иван, запросил баланс своего текущего счёта.
> - Я, как менеджер банка Анна, закрыла срочный вклад клиента Ивана «Надёжный‑6» и начислила проценты, чтобы завершить договор.
> - Я, как система, каждый день начисляю проценты по вкладу, чтобы поддерживать актуальное состояние счета по вкладу.— по завершении операции публикуется InterestAccrued.
> - Я, как сотрудник antifraud, временно блокирую клиента — сервис «Счета» получает событие ClientBlocked и запрещает новые расходные операции (в рамках задания — через RMQ‑заглушку).

по запросу /swagger в development режиме выходит swagger ui

> ### Важное примечание
> Для запуска комплекса сервисов необходим запущенный docker, после чего в терминале (консоли, если вы на `Windows`) прописать комманду
> docker compose up -d, после чего необходимо подождать около 10 минут, так как некоторые сервисы имеют довольно длительную загрузку.
> запустятся ряд сервисов, в том числе KeyCloak `localhost:18000` (login: admin, password: admin), RabbitMq host-ui: `localhost:15672` (login: guest, password: guest).
> Сервер запустится на 80 порте.



### Авторизация
Для авторизации (через swagger) необходимо ввести в `authorizate` ввести в поле `module-client-public` и выбрать все scopes `openid` и `profile`
При авторизации вы можете создать новый профиль или если вам лень создавать используйте готовую запись login: `margaret` pwd: `123456`

user controller теперь отвечает за коммуникацию с keycloak. endpoint verify оставляю для того, так как по предметной области клиенты банка не могут создавать сами себе счета.